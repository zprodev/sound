{"version":3,"file":"StreamFilter.mjs","sources":["../../src/filters/StreamFilter.ts"],"sourcesContent":["import { getInstance } from '../instance';\nimport { Filter } from './Filter';\n\n/**\n * Export a MediaStream to be recorded\n *\n * @memberof filters\n */\nclass StreamFilter extends Filter\n{\n    private _stream: MediaStream;\n\n    constructor()\n    {\n        if (getInstance().useLegacy)\n        {\n            super(null);\n\n            return;\n        }\n        const audioContext: AudioContext = getInstance().context.audioContext;\n        const destination: MediaStreamAudioDestinationNode = audioContext.createMediaStreamDestination();\n        const source: MediaStreamAudioSourceNode = audioContext.createMediaStreamSource(destination.stream);\n\n        super(destination, source);\n        this._stream = destination.stream;\n    }\n\n    public get stream(): MediaStream\n    {\n        return this._stream;\n    }\n\n    public destroy(): void\n    {\n        this._stream = null;\n        super.destroy();\n    }\n}\n\nexport { StreamFilter };\n"],"names":[],"mappings":";;;AAQA,MAAM,qBAAqB,MAC3B,CAAA;AAAA,EAGI,WACA,GAAA;AAAA,IAAA,IAAA,OAAA,GAAA,CAAA,GAAA,IAAA,KAAA;AAAA,MAAA,KAAA,CAAA,GAAA,IAAA,CAAA,CAAA;AAAA,KAAA,CAAA;AACI,IAAI,IAAA,WAAA,GAAc,SAClB,EAAA;AACI,MAAA,OAAA,CAAM,IAAI,CAAA,CAAA;AAEV,MAAA,OAAA;AAAA,KACJ;AACA,IAAM,MAAA,YAAA,GAA6B,WAAY,EAAA,CAAE,OAAQ,CAAA,YAAA,CAAA;AACzD,IAAM,MAAA,WAAA,GAA+C,aAAa,4BAA6B,EAAA,CAAA;AAC/F,IAAA,MAAM,MAAqC,GAAA,YAAA,CAAa,uBAAwB,CAAA,WAAA,CAAY,MAAM,CAAA,CAAA;AAElG,IAAA,OAAA,CAAM,aAAa,MAAM,CAAA,CAAA;AACzB,IAAA,IAAA,CAAK,UAAU,WAAY,CAAA,MAAA,CAAA;AAAA,GAC/B;AAAA,EAEA,IAAW,MACX,GAAA;AACI,IAAA,OAAO,IAAK,CAAA,OAAA,CAAA;AAAA,GAChB;AAAA,EAEO,OACP,GAAA;AACI,IAAA,IAAA,CAAK,OAAU,GAAA,IAAA,CAAA;AACf,IAAA,KAAA,CAAM,OAAQ,EAAA,CAAA;AAAA,GAClB;AACJ;;;;"}